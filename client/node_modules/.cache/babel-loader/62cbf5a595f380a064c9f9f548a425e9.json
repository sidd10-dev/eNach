{"ast":null,"code":"/**\r\n * logger.js: TODO: add file header description.\r\n *\r\n * (C) 2010 Charlie Robbins\r\n * MIT LICENCE\r\n */\n'use strict';\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass) _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n\n  return _assertThisInitialized(self);\n}\n\nfunction _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nvar _require = require('readable-stream'),\n    Stream = _require.Stream,\n    Transform = _require.Transform;\n\nvar asyncForEach = require('async/forEach');\n\nvar _require2 = require('triple-beam'),\n    LEVEL = _require2.LEVEL,\n    SPLAT = _require2.SPLAT;\n\nvar isStream = require('is-stream');\n\nvar ExceptionHandler = require('./exception-handler');\n\nvar RejectionHandler = require('./rejection-handler');\n\nvar LegacyTransportStream = require('winston-transport/legacy');\n\nvar Profiler = require('./profiler');\n\nvar _require3 = require('./common'),\n    warn = _require3.warn;\n\nvar config = require('./config');\n/**\r\n * Captures the number of format (i.e. %s strings) in a given string.\r\n * Based on `util.format`, see Node.js source:\r\n * https://github.com/nodejs/node/blob/b1c8f15c5f169e021f7c46eb7b219de95fe97603/lib/util.js#L201-L230\r\n * @type {RegExp}\r\n */\n\n\nvar formatRegExp = /%[scdjifoO%]/g;\n/**\r\n * TODO: add class description.\r\n * @type {Logger}\r\n * @extends {Transform}\r\n */\n\nvar Logger = /*#__PURE__*/function (_Transform) {\n  _inherits(Logger, _Transform);\n\n  var _super = _createSuper(Logger);\n  /**\r\n   * Constructor function for the Logger object responsible for persisting log\r\n   * messages and metadata to one or more transports.\r\n   * @param {!Object} options - foo\r\n   */\n\n\n  function Logger(options) {\n    var _this;\n\n    _classCallCheck(this, Logger);\n\n    _this = _super.call(this, {\n      objectMode: true\n    });\n\n    _this.configure(options);\n\n    return _this;\n  }\n\n  _createClass(Logger, [{\n    key: \"child\",\n    value: function child(defaultRequestMetadata) {\n      var logger = this;\n      return Object.create(logger, {\n        write: {\n          value: function value(info) {\n            var infoClone = Object.assign({}, defaultRequestMetadata, info); // Object.assign doesn't copy inherited Error\n            // properties so we have to do that explicitly\n            //\n            // Remark (indexzero): we should remove this\n            // since the errors format will handle this case.\n            //\n\n            if (info instanceof Error) {\n              infoClone.stack = info.stack;\n              infoClone.message = info.message;\n            }\n\n            logger.write(infoClone);\n          }\n        }\n      });\n    }\n    /**\r\n     * This will wholesale reconfigure this instance by:\r\n     * 1. Resetting all transports. Older transports will be removed implicitly.\r\n     * 2. Set all other options including levels, colors, rewriters, filters,\r\n     *    exceptionHandlers, etc.\r\n     * @param {!Object} options - TODO: add param description.\r\n     * @returns {undefined}\r\n     */\n\n  }, {\n    key: \"configure\",\n    value: function configure() {\n      var _this2 = this;\n\n      var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          silent = _ref.silent,\n          format = _ref.format,\n          defaultMeta = _ref.defaultMeta,\n          levels = _ref.levels,\n          _ref$level = _ref.level,\n          level = _ref$level === void 0 ? 'info' : _ref$level,\n          _ref$exitOnError = _ref.exitOnError,\n          exitOnError = _ref$exitOnError === void 0 ? true : _ref$exitOnError,\n          transports = _ref.transports,\n          colors = _ref.colors,\n          emitErrs = _ref.emitErrs,\n          formatters = _ref.formatters,\n          padLevels = _ref.padLevels,\n          rewriters = _ref.rewriters,\n          stripColors = _ref.stripColors,\n          exceptionHandlers = _ref.exceptionHandlers,\n          rejectionHandlers = _ref.rejectionHandlers; // Reset transports if we already have them\n\n\n      if (this.transports.length) {\n        this.clear();\n      }\n\n      this.silent = silent;\n      this.format = format || this.format || require('logform/json')();\n      this.defaultMeta = defaultMeta || null; // Hoist other options onto this instance.\n\n      this.levels = levels || this.levels || config.npm.levels;\n      this.level = level;\n\n      if (this.exceptions) {\n        this.exceptions.unhandle();\n      }\n\n      if (this.rejections) {\n        this.rejections.unhandle();\n      }\n\n      this.exceptions = new ExceptionHandler(this);\n      this.rejections = new RejectionHandler(this);\n      this.profilers = {};\n      this.exitOnError = exitOnError; // Add all transports we have been provided.\n\n      if (transports) {\n        transports = Array.isArray(transports) ? transports : [transports];\n        transports.forEach(function (transport) {\n          return _this2.add(transport);\n        });\n      }\n\n      if (colors || emitErrs || formatters || padLevels || rewriters || stripColors) {\n        throw new Error(['{ colors, emitErrs, formatters, padLevels, rewriters, stripColors } were removed in winston@3.0.0.', 'Use a custom winston.format(function) instead.', 'See: https://github.com/winstonjs/winston/tree/master/UPGRADE-3.0.md'].join('\\n'));\n      }\n\n      if (exceptionHandlers) {\n        this.exceptions.handle(exceptionHandlers);\n      }\n\n      if (rejectionHandlers) {\n        this.rejections.handle(rejectionHandlers);\n      }\n    }\n  }, {\n    key: \"isLevelEnabled\",\n    value: function isLevelEnabled(level) {\n      var _this3 = this;\n\n      var givenLevelValue = getLevelValue(this.levels, level);\n\n      if (givenLevelValue === null) {\n        return false;\n      }\n\n      var configuredLevelValue = getLevelValue(this.levels, this.level);\n\n      if (configuredLevelValue === null) {\n        return false;\n      }\n\n      if (!this.transports || this.transports.length === 0) {\n        return configuredLevelValue >= givenLevelValue;\n      }\n\n      var index = this.transports.findIndex(function (transport) {\n        var transportLevelValue = getLevelValue(_this3.levels, transport.level);\n\n        if (transportLevelValue === null) {\n          transportLevelValue = configuredLevelValue;\n        }\n\n        return transportLevelValue >= givenLevelValue;\n      });\n      return index !== -1;\n    }\n    /* eslint-disable valid-jsdoc */\n\n    /**\r\n     * Ensure backwards compatibility with a `log` method\r\n     * @param {mixed} level - Level the log message is written at.\r\n     * @param {mixed} msg - TODO: add param description.\r\n     * @param {mixed} meta - TODO: add param description.\r\n     * @returns {Logger} - TODO: add return description.\r\n     *\r\n     * @example\r\n     *    // Supports the existing API:\r\n     *    logger.log('info', 'Hello world', { custom: true });\r\n     *    logger.log('info', new Error('Yo, it\\'s on fire'));\r\n     *\r\n     *    // Requires winston.format.splat()\r\n     *    logger.log('info', '%s %d%%', 'A string', 50, { thisIsMeta: true });\r\n     *\r\n     *    // And the new API with a single JSON literal:\r\n     *    logger.log({ level: 'info', message: 'Hello world', custom: true });\r\n     *    logger.log({ level: 'info', message: new Error('Yo, it\\'s on fire') });\r\n     *\r\n     *    // Also requires winston.format.splat()\r\n     *    logger.log({\r\n     *      level: 'info',\r\n     *      message: '%s %d%%',\r\n     *      [SPLAT]: ['A string', 50],\r\n     *      meta: { thisIsMeta: true }\r\n     *    });\r\n     *\r\n     */\n\n    /* eslint-enable valid-jsdoc */\n\n  }, {\n    key: \"log\",\n    value: function log(level, msg) {\n      var _Object$assign2;\n\n      for (var _len = arguments.length, splat = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n        splat[_key - 2] = arguments[_key];\n      } // eslint-disable-line max-params\n      // Optimize for the hotpath of logging JSON literals\n\n\n      if (arguments.length === 1) {\n        // Yo dawg, I heard you like levels ... seriously ...\n        // In this context the LHS `level` here is actually the `info` so read\n        // this as: info[LEVEL] = info.level;\n        level[LEVEL] = level.level;\n\n        this._addDefaultMeta(level);\n\n        this.write(level);\n        return this;\n      } // Slightly less hotpath, but worth optimizing for.\n\n\n      if (arguments.length === 2) {\n        var _msg;\n\n        if (msg && _typeof(msg) === 'object') {\n          msg[LEVEL] = msg.level = level;\n\n          this._addDefaultMeta(msg);\n\n          this.write(msg);\n          return this;\n        }\n\n        msg = (_msg = {}, _defineProperty(_msg, LEVEL, level), _defineProperty(_msg, \"level\", level), _defineProperty(_msg, \"message\", msg), _msg);\n\n        this._addDefaultMeta(msg);\n\n        this.write(msg);\n        return this;\n      }\n\n      var meta = splat[0];\n\n      if (_typeof(meta) === 'object' && meta !== null) {\n        // Extract tokens, if none available default to empty array to\n        // ensure consistancy in expected results\n        var tokens = msg && msg.match && msg.match(formatRegExp);\n\n        if (!tokens) {\n          var _Object$assign;\n\n          var info = Object.assign({}, this.defaultMeta, meta, (_Object$assign = {}, _defineProperty(_Object$assign, LEVEL, level), _defineProperty(_Object$assign, SPLAT, splat), _defineProperty(_Object$assign, \"level\", level), _defineProperty(_Object$assign, \"message\", msg), _Object$assign));\n          if (meta.message) info.message = \"\".concat(info.message, \" \").concat(meta.message);\n          if (meta.stack) info.stack = meta.stack;\n          this.write(info);\n          return this;\n        }\n      }\n\n      this.write(Object.assign({}, this.defaultMeta, (_Object$assign2 = {}, _defineProperty(_Object$assign2, LEVEL, level), _defineProperty(_Object$assign2, SPLAT, splat), _defineProperty(_Object$assign2, \"level\", level), _defineProperty(_Object$assign2, \"message\", msg), _Object$assign2)));\n      return this;\n    }\n    /**\r\n     * Pushes data so that it can be picked up by all of our pipe targets.\r\n     * @param {mixed} info - TODO: add param description.\r\n     * @param {mixed} enc - TODO: add param description.\r\n     * @param {mixed} callback - Continues stream processing.\r\n     * @returns {undefined}\r\n     * @private\r\n     */\n\n  }, {\n    key: \"_transform\",\n    value: function _transform(info, enc, callback) {\n      if (this.silent) {\n        return callback();\n      } // [LEVEL] is only soft guaranteed to be set here since we are a proper\n      // stream. It is likely that `info` came in through `.log(info)` or\n      // `.info(info)`. If it is not defined, however, define it.\n      // This LEVEL symbol is provided by `triple-beam` and also used in:\n      // - logform\n      // - winston-transport\n      // - abstract-winston-transport\n\n\n      if (!info[LEVEL]) {\n        info[LEVEL] = info.level;\n      } // Remark: really not sure what to do here, but this has been reported as\n      // very confusing by pre winston@2.0.0 users as quite confusing when using\n      // custom levels.\n\n\n      if (!this.levels[info[LEVEL]] && this.levels[info[LEVEL]] !== 0) {\n        // eslint-disable-next-line no-console\n        console.error('[winston] Unknown logger level: %s', info[LEVEL]);\n      } // Remark: not sure if we should simply error here.\n\n\n      if (!this._readableState.pipes) {\n        // eslint-disable-next-line no-console\n        console.error('[winston] Attempt to write logs with no transports %j', info);\n      } // Here we write to the `format` pipe-chain, which on `readable` above will\n      // push the formatted `info` Object onto the buffer for this instance. We trap\n      // (and re-throw) any errors generated by the user-provided format, but also\n      // guarantee that the streams callback is invoked so that we can continue flowing.\n\n\n      try {\n        this.push(this.format.transform(info, this.format.options));\n      } finally {\n        this._writableState.sync = false; // eslint-disable-next-line callback-return\n\n        callback();\n      }\n    }\n    /**\r\n     * Delays the 'finish' event until all transport pipe targets have\r\n     * also emitted 'finish' or are already finished.\r\n     * @param {mixed} callback - Continues stream processing.\r\n     */\n\n  }, {\n    key: \"_final\",\n    value: function _final(callback) {\n      var transports = this.transports.slice();\n      asyncForEach(transports, function (transport, next) {\n        if (!transport || transport.finished) return setImmediate(next);\n        transport.once('finish', next);\n        transport.end();\n      }, callback);\n    }\n    /**\r\n     * Adds the transport to this logger instance by piping to it.\r\n     * @param {mixed} transport - TODO: add param description.\r\n     * @returns {Logger} - TODO: add return description.\r\n     */\n\n  }, {\n    key: \"add\",\n    value: function add(transport) {\n      // Support backwards compatibility with all existing `winston < 3.x.x`\n      // transports which meet one of two criteria:\n      // 1. They inherit from winston.Transport in  < 3.x.x which is NOT a stream.\n      // 2. They expose a log method which has a length greater than 2 (i.e. more then\n      //    just `log(info, callback)`.\n      var target = !isStream(transport) || transport.log.length > 2 ? new LegacyTransportStream({\n        transport: transport\n      }) : transport;\n\n      if (!target._writableState || !target._writableState.objectMode) {\n        throw new Error('Transports must WritableStreams in objectMode. Set { objectMode: true }.');\n      } // Listen for the `error` event and the `warn` event on the new Transport.\n\n\n      this._onEvent('error', target);\n\n      this._onEvent('warn', target);\n\n      this.pipe(target);\n\n      if (transport.handleExceptions) {\n        this.exceptions.handle();\n      }\n\n      if (transport.handleRejections) {\n        this.rejections.handle();\n      }\n\n      return this;\n    }\n    /**\r\n     * Removes the transport from this logger instance by unpiping from it.\r\n     * @param {mixed} transport - TODO: add param description.\r\n     * @returns {Logger} - TODO: add return description.\r\n     */\n\n  }, {\n    key: \"remove\",\n    value: function remove(transport) {\n      if (!transport) return this;\n      var target = transport;\n\n      if (!isStream(transport) || transport.log.length > 2) {\n        target = this.transports.filter(function (match) {\n          return match.transport === transport;\n        })[0];\n      }\n\n      if (target) {\n        this.unpipe(target);\n      }\n\n      return this;\n    }\n    /**\r\n     * Removes all transports from this logger instance.\r\n     * @returns {Logger} - TODO: add return description.\r\n     */\n\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      this.unpipe();\n      return this;\n    }\n    /**\r\n     * Cleans up resources (streams, event listeners) for all transports\r\n     * associated with this instance (if necessary).\r\n     * @returns {Logger} - TODO: add return description.\r\n     */\n\n  }, {\n    key: \"close\",\n    value: function close() {\n      this.exceptions.unhandle();\n      this.rejections.unhandle();\n      this.clear();\n      this.emit('close');\n      return this;\n    }\n    /**\r\n     * Sets the `target` levels specified on this instance.\r\n     * @param {Object} Target levels to use on this instance.\r\n     */\n\n  }, {\n    key: \"setLevels\",\n    value: function setLevels() {\n      warn.deprecated('setLevels');\n    }\n    /**\r\n     * Queries the all transports for this instance with the specified `options`.\r\n     * This will aggregate each transport's results into one object containing\r\n     * a property per transport.\r\n     * @param {Object} options - Query options for this instance.\r\n     * @param {function} callback - Continuation to respond to when complete.\r\n     */\n\n  }, {\n    key: \"query\",\n    value: function query(options, callback) {\n      if (typeof options === 'function') {\n        callback = options;\n        options = {};\n      }\n\n      options = options || {};\n      var results = {};\n      var queryObject = Object.assign({}, options.query || {}); // Helper function to query a single transport\n\n      function queryTransport(transport, next) {\n        if (options.query && typeof transport.formatQuery === 'function') {\n          options.query = transport.formatQuery(queryObject);\n        }\n\n        transport.query(options, function (err, res) {\n          if (err) {\n            return next(err);\n          }\n\n          if (typeof transport.formatResults === 'function') {\n            res = transport.formatResults(res, options.format);\n          }\n\n          next(null, res);\n        });\n      } // Helper function to accumulate the results from `queryTransport` into\n      // the `results`.\n\n\n      function addResults(transport, next) {\n        queryTransport(transport, function (err, result) {\n          // queryTransport could potentially invoke the callback multiple times\n          // since Transport code can be unpredictable.\n          if (next) {\n            result = err || result;\n\n            if (result) {\n              results[transport.name] = result;\n            } // eslint-disable-next-line callback-return\n\n\n            next();\n          }\n\n          next = null;\n        });\n      } // Iterate over the transports in parallel setting the appropriate key in\n      // the `results`.\n\n\n      asyncForEach(this.transports.filter(function (transport) {\n        return !!transport.query;\n      }), addResults, function () {\n        return callback(null, results);\n      });\n    }\n    /**\r\n     * Returns a log stream for all transports. Options object is optional.\r\n     * @param{Object} options={} - Stream options for this instance.\r\n     * @returns {Stream} - TODO: add return description.\r\n     */\n\n  }, {\n    key: \"stream\",\n    value: function stream() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var out = new Stream();\n      var streams = [];\n      out._streams = streams;\n\n      out.destroy = function () {\n        var i = streams.length;\n\n        while (i--) {\n          streams[i].destroy();\n        }\n      }; // Create a list of all transports for this instance.\n\n\n      this.transports.filter(function (transport) {\n        return !!transport.stream;\n      }).forEach(function (transport) {\n        var str = transport.stream(options);\n\n        if (!str) {\n          return;\n        }\n\n        streams.push(str);\n        str.on('log', function (log) {\n          log.transport = log.transport || [];\n          log.transport.push(transport.name);\n          out.emit('log', log);\n        });\n        str.on('error', function (err) {\n          err.transport = err.transport || [];\n          err.transport.push(transport.name);\n          out.emit('error', err);\n        });\n      });\n      return out;\n    }\n    /**\r\n     * Returns an object corresponding to a specific timing. When done is called\r\n     * the timer will finish and log the duration. e.g.:\r\n     * @returns {Profile} - TODO: add return description.\r\n     * @example\r\n     *    const timer = winston.startTimer()\r\n     *    setTimeout(() => {\r\n     *      timer.done({\r\n     *        message: 'Logging message'\r\n     *      });\r\n     *    }, 1000);\r\n     */\n\n  }, {\n    key: \"startTimer\",\n    value: function startTimer() {\n      return new Profiler(this);\n    }\n    /**\r\n     * Tracks the time inbetween subsequent calls to this method with the same\r\n     * `id` parameter. The second call to this method will log the difference in\r\n     * milliseconds along with the message.\r\n     * @param {string} id Unique id of the profiler\r\n     * @returns {Logger} - TODO: add return description.\r\n     */\n\n  }, {\n    key: \"profile\",\n    value: function profile(id) {\n      var time = Date.now();\n\n      if (this.profilers[id]) {\n        var timeEnd = this.profilers[id];\n        delete this.profilers[id]; // Attempt to be kind to users if they are still using older APIs.\n\n        for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n          args[_key2 - 1] = arguments[_key2];\n        }\n\n        if (typeof args[args.length - 2] === 'function') {\n          // eslint-disable-next-line no-console\n          console.warn('Callback function no longer supported as of winston@3.0.0');\n          args.pop();\n        } // Set the duration property of the metadata\n\n\n        var info = _typeof(args[args.length - 1]) === 'object' ? args.pop() : {};\n        info.level = info.level || 'info';\n        info.durationMs = time - timeEnd;\n        info.message = info.message || id;\n        return this.write(info);\n      }\n\n      this.profilers[id] = time;\n      return this;\n    }\n    /**\r\n     * Backwards compatibility to `exceptions.handle` in winston < 3.0.0.\r\n     * @returns {undefined}\r\n     * @deprecated\r\n     */\n\n  }, {\n    key: \"handleExceptions\",\n    value: function handleExceptions() {\n      var _this$exceptions; // eslint-disable-next-line no-console\n\n\n      console.warn('Deprecated: .handleExceptions() will be removed in winston@4. Use .exceptions.handle()');\n\n      (_this$exceptions = this.exceptions).handle.apply(_this$exceptions, arguments);\n    }\n    /**\r\n     * Backwards compatibility to `exceptions.handle` in winston < 3.0.0.\r\n     * @returns {undefined}\r\n     * @deprecated\r\n     */\n\n  }, {\n    key: \"unhandleExceptions\",\n    value: function unhandleExceptions() {\n      var _this$exceptions2; // eslint-disable-next-line no-console\n\n\n      console.warn('Deprecated: .unhandleExceptions() will be removed in winston@4. Use .exceptions.unhandle()');\n\n      (_this$exceptions2 = this.exceptions).unhandle.apply(_this$exceptions2, arguments);\n    }\n    /**\r\n     * Throw a more meaningful deprecation notice\r\n     * @throws {Error} - TODO: add throws description.\r\n     */\n\n  }, {\n    key: \"cli\",\n    value: function cli() {\n      throw new Error(['Logger.cli() was removed in winston@3.0.0', 'Use a custom winston.formats.cli() instead.', 'See: https://github.com/winstonjs/winston/tree/master/UPGRADE-3.0.md'].join('\\n'));\n    }\n    /**\r\n     * Bubbles the `event` that occured on the specified `transport` up\r\n     * from this instance.\r\n     * @param {string} event - The event that occured\r\n     * @param {Object} transport - Transport on which the event occured\r\n     * @private\r\n     */\n\n  }, {\n    key: \"_onEvent\",\n    value: function _onEvent(event, transport) {\n      function transportEvent(err) {\n        // https://github.com/winstonjs/winston/issues/1364\n        if (event === 'error' && !this.transports.includes(transport)) {\n          this.add(transport);\n        }\n\n        this.emit(event, err, transport);\n      }\n\n      if (!transport['__winston' + event]) {\n        transport['__winston' + event] = transportEvent.bind(this);\n        transport.on(event, transport['__winston' + event]);\n      }\n    }\n  }, {\n    key: \"_addDefaultMeta\",\n    value: function _addDefaultMeta(msg) {\n      if (this.defaultMeta) {\n        Object.assign(msg, this.defaultMeta);\n      }\n    }\n  }]);\n\n  return Logger;\n}(Transform);\n\nfunction getLevelValue(levels, level) {\n  var value = levels[level];\n\n  if (!value && value !== 0) {\n    return null;\n  }\n\n  return value;\n}\n/**\r\n * Represents the current readableState pipe targets for this Logger instance.\r\n * @type {Array|Object}\r\n */\n\n\nObject.defineProperty(Logger.prototype, 'transports', {\n  configurable: false,\n  enumerable: true,\n  get: function get() {\n    var pipes = this._readableState.pipes;\n    return !Array.isArray(pipes) ? [pipes].filter(Boolean) : pipes;\n  }\n});\nmodule.exports = Logger;","map":{"version":3,"names":["_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","_typeof","Symbol","iterator","constructor","prototype","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","_createClass","protoProps","staticProps","_inherits","subClass","superClass","create","_setPrototypeOf","o","p","setPrototypeOf","__proto__","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","_getPrototypeOf","result","NewTarget","Reflect","construct","arguments","apply","_possibleConstructorReturn","self","call","_assertThisInitialized","ReferenceError","sham","Proxy","Boolean","valueOf","e","getPrototypeOf","_require","require","Stream","Transform","asyncForEach","_require2","LEVEL","SPLAT","isStream","ExceptionHandler","RejectionHandler","LegacyTransportStream","Profiler","_require3","warn","config","formatRegExp","Logger","_Transform","_super","options","_this","objectMode","configure","child","defaultRequestMetadata","logger","write","info","infoClone","assign","Error","stack","message","_this2","_ref","undefined","silent","format","defaultMeta","levels","_ref$level","level","_ref$exitOnError","exitOnError","transports","colors","emitErrs","formatters","padLevels","rewriters","stripColors","exceptionHandlers","rejectionHandlers","clear","npm","exceptions","unhandle","rejections","profilers","Array","isArray","forEach","transport","add","join","handle","isLevelEnabled","_this3","givenLevelValue","getLevelValue","configuredLevelValue","index","findIndex","transportLevelValue","log","msg","_Object$assign2","_len","splat","_key","_addDefaultMeta","_msg","meta","tokens","match","_Object$assign","concat","_transform","enc","callback","console","error","_readableState","pipes","push","transform","_writableState","sync","_final","slice","next","finished","setImmediate","once","end","_onEvent","pipe","handleExceptions","handleRejections","remove","filter","unpipe","close","emit","setLevels","deprecated","query","results","queryObject","queryTransport","formatQuery","err","res","formatResults","addResults","name","stream","out","streams","_streams","destroy","str","on","startTimer","profile","id","time","Date","now","timeEnd","_len2","args","_key2","pop","durationMs","_this$exceptions","unhandleExceptions","_this$exceptions2","cli","event","transportEvent","includes","bind","get","module","exports"],"sources":["D:/Other Files/tktnew/eMandate/client/node_modules/winston/dist/winston/logger.js"],"sourcesContent":["/**\r\n * logger.js: TODO: add file header description.\r\n *\r\n * (C) 2010 Charlie Robbins\r\n * MIT LICENCE\r\n */\n'use strict';\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nvar _require = require('readable-stream'),\n    Stream = _require.Stream,\n    Transform = _require.Transform;\n\nvar asyncForEach = require('async/forEach');\n\nvar _require2 = require('triple-beam'),\n    LEVEL = _require2.LEVEL,\n    SPLAT = _require2.SPLAT;\n\nvar isStream = require('is-stream');\n\nvar ExceptionHandler = require('./exception-handler');\n\nvar RejectionHandler = require('./rejection-handler');\n\nvar LegacyTransportStream = require('winston-transport/legacy');\n\nvar Profiler = require('./profiler');\n\nvar _require3 = require('./common'),\n    warn = _require3.warn;\n\nvar config = require('./config');\n/**\r\n * Captures the number of format (i.e. %s strings) in a given string.\r\n * Based on `util.format`, see Node.js source:\r\n * https://github.com/nodejs/node/blob/b1c8f15c5f169e021f7c46eb7b219de95fe97603/lib/util.js#L201-L230\r\n * @type {RegExp}\r\n */\n\n\nvar formatRegExp = /%[scdjifoO%]/g;\n/**\r\n * TODO: add class description.\r\n * @type {Logger}\r\n * @extends {Transform}\r\n */\n\nvar Logger = /*#__PURE__*/function (_Transform) {\n  _inherits(Logger, _Transform);\n\n  var _super = _createSuper(Logger);\n\n  /**\r\n   * Constructor function for the Logger object responsible for persisting log\r\n   * messages and metadata to one or more transports.\r\n   * @param {!Object} options - foo\r\n   */\n  function Logger(options) {\n    var _this;\n\n    _classCallCheck(this, Logger);\n\n    _this = _super.call(this, {\n      objectMode: true\n    });\n\n    _this.configure(options);\n\n    return _this;\n  }\n\n  _createClass(Logger, [{\n    key: \"child\",\n    value: function child(defaultRequestMetadata) {\n      var logger = this;\n      return Object.create(logger, {\n        write: {\n          value: function value(info) {\n            var infoClone = Object.assign({}, defaultRequestMetadata, info); // Object.assign doesn't copy inherited Error\n            // properties so we have to do that explicitly\n            //\n            // Remark (indexzero): we should remove this\n            // since the errors format will handle this case.\n            //\n\n            if (info instanceof Error) {\n              infoClone.stack = info.stack;\n              infoClone.message = info.message;\n            }\n\n            logger.write(infoClone);\n          }\n        }\n      });\n    }\n    /**\r\n     * This will wholesale reconfigure this instance by:\r\n     * 1. Resetting all transports. Older transports will be removed implicitly.\r\n     * 2. Set all other options including levels, colors, rewriters, filters,\r\n     *    exceptionHandlers, etc.\r\n     * @param {!Object} options - TODO: add param description.\r\n     * @returns {undefined}\r\n     */\n\n  }, {\n    key: \"configure\",\n    value: function configure() {\n      var _this2 = this;\n\n      var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          silent = _ref.silent,\n          format = _ref.format,\n          defaultMeta = _ref.defaultMeta,\n          levels = _ref.levels,\n          _ref$level = _ref.level,\n          level = _ref$level === void 0 ? 'info' : _ref$level,\n          _ref$exitOnError = _ref.exitOnError,\n          exitOnError = _ref$exitOnError === void 0 ? true : _ref$exitOnError,\n          transports = _ref.transports,\n          colors = _ref.colors,\n          emitErrs = _ref.emitErrs,\n          formatters = _ref.formatters,\n          padLevels = _ref.padLevels,\n          rewriters = _ref.rewriters,\n          stripColors = _ref.stripColors,\n          exceptionHandlers = _ref.exceptionHandlers,\n          rejectionHandlers = _ref.rejectionHandlers;\n\n      // Reset transports if we already have them\n      if (this.transports.length) {\n        this.clear();\n      }\n\n      this.silent = silent;\n      this.format = format || this.format || require('logform/json')();\n      this.defaultMeta = defaultMeta || null; // Hoist other options onto this instance.\n\n      this.levels = levels || this.levels || config.npm.levels;\n      this.level = level;\n\n      if (this.exceptions) {\n        this.exceptions.unhandle();\n      }\n\n      if (this.rejections) {\n        this.rejections.unhandle();\n      }\n\n      this.exceptions = new ExceptionHandler(this);\n      this.rejections = new RejectionHandler(this);\n      this.profilers = {};\n      this.exitOnError = exitOnError; // Add all transports we have been provided.\n\n      if (transports) {\n        transports = Array.isArray(transports) ? transports : [transports];\n        transports.forEach(function (transport) {\n          return _this2.add(transport);\n        });\n      }\n\n      if (colors || emitErrs || formatters || padLevels || rewriters || stripColors) {\n        throw new Error(['{ colors, emitErrs, formatters, padLevels, rewriters, stripColors } were removed in winston@3.0.0.', 'Use a custom winston.format(function) instead.', 'See: https://github.com/winstonjs/winston/tree/master/UPGRADE-3.0.md'].join('\\n'));\n      }\n\n      if (exceptionHandlers) {\n        this.exceptions.handle(exceptionHandlers);\n      }\n\n      if (rejectionHandlers) {\n        this.rejections.handle(rejectionHandlers);\n      }\n    }\n  }, {\n    key: \"isLevelEnabled\",\n    value: function isLevelEnabled(level) {\n      var _this3 = this;\n\n      var givenLevelValue = getLevelValue(this.levels, level);\n\n      if (givenLevelValue === null) {\n        return false;\n      }\n\n      var configuredLevelValue = getLevelValue(this.levels, this.level);\n\n      if (configuredLevelValue === null) {\n        return false;\n      }\n\n      if (!this.transports || this.transports.length === 0) {\n        return configuredLevelValue >= givenLevelValue;\n      }\n\n      var index = this.transports.findIndex(function (transport) {\n        var transportLevelValue = getLevelValue(_this3.levels, transport.level);\n\n        if (transportLevelValue === null) {\n          transportLevelValue = configuredLevelValue;\n        }\n\n        return transportLevelValue >= givenLevelValue;\n      });\n      return index !== -1;\n    }\n    /* eslint-disable valid-jsdoc */\n\n    /**\r\n     * Ensure backwards compatibility with a `log` method\r\n     * @param {mixed} level - Level the log message is written at.\r\n     * @param {mixed} msg - TODO: add param description.\r\n     * @param {mixed} meta - TODO: add param description.\r\n     * @returns {Logger} - TODO: add return description.\r\n     *\r\n     * @example\r\n     *    // Supports the existing API:\r\n     *    logger.log('info', 'Hello world', { custom: true });\r\n     *    logger.log('info', new Error('Yo, it\\'s on fire'));\r\n     *\r\n     *    // Requires winston.format.splat()\r\n     *    logger.log('info', '%s %d%%', 'A string', 50, { thisIsMeta: true });\r\n     *\r\n     *    // And the new API with a single JSON literal:\r\n     *    logger.log({ level: 'info', message: 'Hello world', custom: true });\r\n     *    logger.log({ level: 'info', message: new Error('Yo, it\\'s on fire') });\r\n     *\r\n     *    // Also requires winston.format.splat()\r\n     *    logger.log({\r\n     *      level: 'info',\r\n     *      message: '%s %d%%',\r\n     *      [SPLAT]: ['A string', 50],\r\n     *      meta: { thisIsMeta: true }\r\n     *    });\r\n     *\r\n     */\n\n    /* eslint-enable valid-jsdoc */\n\n  }, {\n    key: \"log\",\n    value: function log(level, msg) {\n      var _Object$assign2;\n\n      for (var _len = arguments.length, splat = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n        splat[_key - 2] = arguments[_key];\n      }\n\n      // eslint-disable-line max-params\n      // Optimize for the hotpath of logging JSON literals\n      if (arguments.length === 1) {\n        // Yo dawg, I heard you like levels ... seriously ...\n        // In this context the LHS `level` here is actually the `info` so read\n        // this as: info[LEVEL] = info.level;\n        level[LEVEL] = level.level;\n\n        this._addDefaultMeta(level);\n\n        this.write(level);\n        return this;\n      } // Slightly less hotpath, but worth optimizing for.\n\n\n      if (arguments.length === 2) {\n        var _msg;\n\n        if (msg && _typeof(msg) === 'object') {\n          msg[LEVEL] = msg.level = level;\n\n          this._addDefaultMeta(msg);\n\n          this.write(msg);\n          return this;\n        }\n\n        msg = (_msg = {}, _defineProperty(_msg, LEVEL, level), _defineProperty(_msg, \"level\", level), _defineProperty(_msg, \"message\", msg), _msg);\n\n        this._addDefaultMeta(msg);\n\n        this.write(msg);\n        return this;\n      }\n\n      var meta = splat[0];\n\n      if (_typeof(meta) === 'object' && meta !== null) {\n        // Extract tokens, if none available default to empty array to\n        // ensure consistancy in expected results\n        var tokens = msg && msg.match && msg.match(formatRegExp);\n\n        if (!tokens) {\n          var _Object$assign;\n\n          var info = Object.assign({}, this.defaultMeta, meta, (_Object$assign = {}, _defineProperty(_Object$assign, LEVEL, level), _defineProperty(_Object$assign, SPLAT, splat), _defineProperty(_Object$assign, \"level\", level), _defineProperty(_Object$assign, \"message\", msg), _Object$assign));\n          if (meta.message) info.message = \"\".concat(info.message, \" \").concat(meta.message);\n          if (meta.stack) info.stack = meta.stack;\n          this.write(info);\n          return this;\n        }\n      }\n\n      this.write(Object.assign({}, this.defaultMeta, (_Object$assign2 = {}, _defineProperty(_Object$assign2, LEVEL, level), _defineProperty(_Object$assign2, SPLAT, splat), _defineProperty(_Object$assign2, \"level\", level), _defineProperty(_Object$assign2, \"message\", msg), _Object$assign2)));\n      return this;\n    }\n    /**\r\n     * Pushes data so that it can be picked up by all of our pipe targets.\r\n     * @param {mixed} info - TODO: add param description.\r\n     * @param {mixed} enc - TODO: add param description.\r\n     * @param {mixed} callback - Continues stream processing.\r\n     * @returns {undefined}\r\n     * @private\r\n     */\n\n  }, {\n    key: \"_transform\",\n    value: function _transform(info, enc, callback) {\n      if (this.silent) {\n        return callback();\n      } // [LEVEL] is only soft guaranteed to be set here since we are a proper\n      // stream. It is likely that `info` came in through `.log(info)` or\n      // `.info(info)`. If it is not defined, however, define it.\n      // This LEVEL symbol is provided by `triple-beam` and also used in:\n      // - logform\n      // - winston-transport\n      // - abstract-winston-transport\n\n\n      if (!info[LEVEL]) {\n        info[LEVEL] = info.level;\n      } // Remark: really not sure what to do here, but this has been reported as\n      // very confusing by pre winston@2.0.0 users as quite confusing when using\n      // custom levels.\n\n\n      if (!this.levels[info[LEVEL]] && this.levels[info[LEVEL]] !== 0) {\n        // eslint-disable-next-line no-console\n        console.error('[winston] Unknown logger level: %s', info[LEVEL]);\n      } // Remark: not sure if we should simply error here.\n\n\n      if (!this._readableState.pipes) {\n        // eslint-disable-next-line no-console\n        console.error('[winston] Attempt to write logs with no transports %j', info);\n      } // Here we write to the `format` pipe-chain, which on `readable` above will\n      // push the formatted `info` Object onto the buffer for this instance. We trap\n      // (and re-throw) any errors generated by the user-provided format, but also\n      // guarantee that the streams callback is invoked so that we can continue flowing.\n\n\n      try {\n        this.push(this.format.transform(info, this.format.options));\n      } finally {\n        this._writableState.sync = false; // eslint-disable-next-line callback-return\n\n        callback();\n      }\n    }\n    /**\r\n     * Delays the 'finish' event until all transport pipe targets have\r\n     * also emitted 'finish' or are already finished.\r\n     * @param {mixed} callback - Continues stream processing.\r\n     */\n\n  }, {\n    key: \"_final\",\n    value: function _final(callback) {\n      var transports = this.transports.slice();\n      asyncForEach(transports, function (transport, next) {\n        if (!transport || transport.finished) return setImmediate(next);\n        transport.once('finish', next);\n        transport.end();\n      }, callback);\n    }\n    /**\r\n     * Adds the transport to this logger instance by piping to it.\r\n     * @param {mixed} transport - TODO: add param description.\r\n     * @returns {Logger} - TODO: add return description.\r\n     */\n\n  }, {\n    key: \"add\",\n    value: function add(transport) {\n      // Support backwards compatibility with all existing `winston < 3.x.x`\n      // transports which meet one of two criteria:\n      // 1. They inherit from winston.Transport in  < 3.x.x which is NOT a stream.\n      // 2. They expose a log method which has a length greater than 2 (i.e. more then\n      //    just `log(info, callback)`.\n      var target = !isStream(transport) || transport.log.length > 2 ? new LegacyTransportStream({\n        transport: transport\n      }) : transport;\n\n      if (!target._writableState || !target._writableState.objectMode) {\n        throw new Error('Transports must WritableStreams in objectMode. Set { objectMode: true }.');\n      } // Listen for the `error` event and the `warn` event on the new Transport.\n\n\n      this._onEvent('error', target);\n\n      this._onEvent('warn', target);\n\n      this.pipe(target);\n\n      if (transport.handleExceptions) {\n        this.exceptions.handle();\n      }\n\n      if (transport.handleRejections) {\n        this.rejections.handle();\n      }\n\n      return this;\n    }\n    /**\r\n     * Removes the transport from this logger instance by unpiping from it.\r\n     * @param {mixed} transport - TODO: add param description.\r\n     * @returns {Logger} - TODO: add return description.\r\n     */\n\n  }, {\n    key: \"remove\",\n    value: function remove(transport) {\n      if (!transport) return this;\n      var target = transport;\n\n      if (!isStream(transport) || transport.log.length > 2) {\n        target = this.transports.filter(function (match) {\n          return match.transport === transport;\n        })[0];\n      }\n\n      if (target) {\n        this.unpipe(target);\n      }\n\n      return this;\n    }\n    /**\r\n     * Removes all transports from this logger instance.\r\n     * @returns {Logger} - TODO: add return description.\r\n     */\n\n  }, {\n    key: \"clear\",\n    value: function clear() {\n      this.unpipe();\n      return this;\n    }\n    /**\r\n     * Cleans up resources (streams, event listeners) for all transports\r\n     * associated with this instance (if necessary).\r\n     * @returns {Logger} - TODO: add return description.\r\n     */\n\n  }, {\n    key: \"close\",\n    value: function close() {\n      this.exceptions.unhandle();\n      this.rejections.unhandle();\n      this.clear();\n      this.emit('close');\n      return this;\n    }\n    /**\r\n     * Sets the `target` levels specified on this instance.\r\n     * @param {Object} Target levels to use on this instance.\r\n     */\n\n  }, {\n    key: \"setLevels\",\n    value: function setLevels() {\n      warn.deprecated('setLevels');\n    }\n    /**\r\n     * Queries the all transports for this instance with the specified `options`.\r\n     * This will aggregate each transport's results into one object containing\r\n     * a property per transport.\r\n     * @param {Object} options - Query options for this instance.\r\n     * @param {function} callback - Continuation to respond to when complete.\r\n     */\n\n  }, {\n    key: \"query\",\n    value: function query(options, callback) {\n      if (typeof options === 'function') {\n        callback = options;\n        options = {};\n      }\n\n      options = options || {};\n      var results = {};\n      var queryObject = Object.assign({}, options.query || {}); // Helper function to query a single transport\n\n      function queryTransport(transport, next) {\n        if (options.query && typeof transport.formatQuery === 'function') {\n          options.query = transport.formatQuery(queryObject);\n        }\n\n        transport.query(options, function (err, res) {\n          if (err) {\n            return next(err);\n          }\n\n          if (typeof transport.formatResults === 'function') {\n            res = transport.formatResults(res, options.format);\n          }\n\n          next(null, res);\n        });\n      } // Helper function to accumulate the results from `queryTransport` into\n      // the `results`.\n\n\n      function addResults(transport, next) {\n        queryTransport(transport, function (err, result) {\n          // queryTransport could potentially invoke the callback multiple times\n          // since Transport code can be unpredictable.\n          if (next) {\n            result = err || result;\n\n            if (result) {\n              results[transport.name] = result;\n            } // eslint-disable-next-line callback-return\n\n\n            next();\n          }\n\n          next = null;\n        });\n      } // Iterate over the transports in parallel setting the appropriate key in\n      // the `results`.\n\n\n      asyncForEach(this.transports.filter(function (transport) {\n        return !!transport.query;\n      }), addResults, function () {\n        return callback(null, results);\n      });\n    }\n    /**\r\n     * Returns a log stream for all transports. Options object is optional.\r\n     * @param{Object} options={} - Stream options for this instance.\r\n     * @returns {Stream} - TODO: add return description.\r\n     */\n\n  }, {\n    key: \"stream\",\n    value: function stream() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      var out = new Stream();\n      var streams = [];\n      out._streams = streams;\n\n      out.destroy = function () {\n        var i = streams.length;\n\n        while (i--) {\n          streams[i].destroy();\n        }\n      }; // Create a list of all transports for this instance.\n\n\n      this.transports.filter(function (transport) {\n        return !!transport.stream;\n      }).forEach(function (transport) {\n        var str = transport.stream(options);\n\n        if (!str) {\n          return;\n        }\n\n        streams.push(str);\n        str.on('log', function (log) {\n          log.transport = log.transport || [];\n          log.transport.push(transport.name);\n          out.emit('log', log);\n        });\n        str.on('error', function (err) {\n          err.transport = err.transport || [];\n          err.transport.push(transport.name);\n          out.emit('error', err);\n        });\n      });\n      return out;\n    }\n    /**\r\n     * Returns an object corresponding to a specific timing. When done is called\r\n     * the timer will finish and log the duration. e.g.:\r\n     * @returns {Profile} - TODO: add return description.\r\n     * @example\r\n     *    const timer = winston.startTimer()\r\n     *    setTimeout(() => {\r\n     *      timer.done({\r\n     *        message: 'Logging message'\r\n     *      });\r\n     *    }, 1000);\r\n     */\n\n  }, {\n    key: \"startTimer\",\n    value: function startTimer() {\n      return new Profiler(this);\n    }\n    /**\r\n     * Tracks the time inbetween subsequent calls to this method with the same\r\n     * `id` parameter. The second call to this method will log the difference in\r\n     * milliseconds along with the message.\r\n     * @param {string} id Unique id of the profiler\r\n     * @returns {Logger} - TODO: add return description.\r\n     */\n\n  }, {\n    key: \"profile\",\n    value: function profile(id) {\n      var time = Date.now();\n\n      if (this.profilers[id]) {\n        var timeEnd = this.profilers[id];\n        delete this.profilers[id]; // Attempt to be kind to users if they are still using older APIs.\n\n        for (var _len2 = arguments.length, args = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n          args[_key2 - 1] = arguments[_key2];\n        }\n\n        if (typeof args[args.length - 2] === 'function') {\n          // eslint-disable-next-line no-console\n          console.warn('Callback function no longer supported as of winston@3.0.0');\n          args.pop();\n        } // Set the duration property of the metadata\n\n\n        var info = _typeof(args[args.length - 1]) === 'object' ? args.pop() : {};\n        info.level = info.level || 'info';\n        info.durationMs = time - timeEnd;\n        info.message = info.message || id;\n        return this.write(info);\n      }\n\n      this.profilers[id] = time;\n      return this;\n    }\n    /**\r\n     * Backwards compatibility to `exceptions.handle` in winston < 3.0.0.\r\n     * @returns {undefined}\r\n     * @deprecated\r\n     */\n\n  }, {\n    key: \"handleExceptions\",\n    value: function handleExceptions() {\n      var _this$exceptions;\n\n      // eslint-disable-next-line no-console\n      console.warn('Deprecated: .handleExceptions() will be removed in winston@4. Use .exceptions.handle()');\n\n      (_this$exceptions = this.exceptions).handle.apply(_this$exceptions, arguments);\n    }\n    /**\r\n     * Backwards compatibility to `exceptions.handle` in winston < 3.0.0.\r\n     * @returns {undefined}\r\n     * @deprecated\r\n     */\n\n  }, {\n    key: \"unhandleExceptions\",\n    value: function unhandleExceptions() {\n      var _this$exceptions2;\n\n      // eslint-disable-next-line no-console\n      console.warn('Deprecated: .unhandleExceptions() will be removed in winston@4. Use .exceptions.unhandle()');\n\n      (_this$exceptions2 = this.exceptions).unhandle.apply(_this$exceptions2, arguments);\n    }\n    /**\r\n     * Throw a more meaningful deprecation notice\r\n     * @throws {Error} - TODO: add throws description.\r\n     */\n\n  }, {\n    key: \"cli\",\n    value: function cli() {\n      throw new Error(['Logger.cli() was removed in winston@3.0.0', 'Use a custom winston.formats.cli() instead.', 'See: https://github.com/winstonjs/winston/tree/master/UPGRADE-3.0.md'].join('\\n'));\n    }\n    /**\r\n     * Bubbles the `event` that occured on the specified `transport` up\r\n     * from this instance.\r\n     * @param {string} event - The event that occured\r\n     * @param {Object} transport - Transport on which the event occured\r\n     * @private\r\n     */\n\n  }, {\n    key: \"_onEvent\",\n    value: function _onEvent(event, transport) {\n      function transportEvent(err) {\n        // https://github.com/winstonjs/winston/issues/1364\n        if (event === 'error' && !this.transports.includes(transport)) {\n          this.add(transport);\n        }\n\n        this.emit(event, err, transport);\n      }\n\n      if (!transport['__winston' + event]) {\n        transport['__winston' + event] = transportEvent.bind(this);\n        transport.on(event, transport['__winston' + event]);\n      }\n    }\n  }, {\n    key: \"_addDefaultMeta\",\n    value: function _addDefaultMeta(msg) {\n      if (this.defaultMeta) {\n        Object.assign(msg, this.defaultMeta);\n      }\n    }\n  }]);\n\n  return Logger;\n}(Transform);\n\nfunction getLevelValue(levels, level) {\n  var value = levels[level];\n\n  if (!value && value !== 0) {\n    return null;\n  }\n\n  return value;\n}\n/**\r\n * Represents the current readableState pipe targets for this Logger instance.\r\n * @type {Array|Object}\r\n */\n\n\nObject.defineProperty(Logger.prototype, 'transports', {\n  configurable: false,\n  enumerable: true,\n  get: function get() {\n    var pipes = this._readableState.pipes;\n    return !Array.isArray(pipes) ? [pipes].filter(Boolean) : pipes;\n  }\n});\nmodule.exports = Logger;"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAASA,eAAT,CAAyBC,GAAzB,EAA8BC,GAA9B,EAAmCC,KAAnC,EAA0C;EAAE,IAAID,GAAG,IAAID,GAAX,EAAgB;IAAEG,MAAM,CAACC,cAAP,CAAsBJ,GAAtB,EAA2BC,GAA3B,EAAgC;MAAEC,KAAK,EAAEA,KAAT;MAAgBG,UAAU,EAAE,IAA5B;MAAkCC,YAAY,EAAE,IAAhD;MAAsDC,QAAQ,EAAE;IAAhE,CAAhC;EAA0G,CAA5H,MAAkI;IAAEP,GAAG,CAACC,GAAD,CAAH,GAAWC,KAAX;EAAmB;;EAAC,OAAOF,GAAP;AAAa;;AAEjN,SAASQ,OAAT,CAAiBR,GAAjB,EAAsB;EAAE;;EAA2B,OAAOQ,OAAO,GAAG,cAAc,OAAOC,MAArB,IAA+B,YAAY,OAAOA,MAAM,CAACC,QAAzD,GAAoE,UAAUV,GAAV,EAAe;IAAE,OAAO,OAAOA,GAAd;EAAoB,CAAzG,GAA4G,UAAUA,GAAV,EAAe;IAAE,OAAOA,GAAG,IAAI,cAAc,OAAOS,MAA5B,IAAsCT,GAAG,CAACW,WAAJ,KAAoBF,MAA1D,IAAoET,GAAG,KAAKS,MAAM,CAACG,SAAnF,GAA+F,QAA/F,GAA0G,OAAOZ,GAAxH;EAA8H,CAArQ,EAAuQQ,OAAO,CAACR,GAAD,CAArR;AAA6R;;AAEhV,SAASa,eAAT,CAAyBC,QAAzB,EAAmCC,WAAnC,EAAgD;EAAE,IAAI,EAAED,QAAQ,YAAYC,WAAtB,CAAJ,EAAwC;IAAE,MAAM,IAAIC,SAAJ,CAAc,mCAAd,CAAN;EAA2D;AAAE;;AAEzJ,SAASC,iBAAT,CAA2BC,MAA3B,EAAmCC,KAAnC,EAA0C;EAAE,KAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,KAAK,CAACE,MAA1B,EAAkCD,CAAC,EAAnC,EAAuC;IAAE,IAAIE,UAAU,GAAGH,KAAK,CAACC,CAAD,CAAtB;IAA2BE,UAAU,CAACjB,UAAX,GAAwBiB,UAAU,CAACjB,UAAX,IAAyB,KAAjD;IAAwDiB,UAAU,CAAChB,YAAX,GAA0B,IAA1B;IAAgC,IAAI,WAAWgB,UAAf,EAA2BA,UAAU,CAACf,QAAX,GAAsB,IAAtB;IAA4BJ,MAAM,CAACC,cAAP,CAAsBc,MAAtB,EAA8BI,UAAU,CAACrB,GAAzC,EAA8CqB,UAA9C;EAA4D;AAAE;;AAE7T,SAASC,YAAT,CAAsBR,WAAtB,EAAmCS,UAAnC,EAA+CC,WAA/C,EAA4D;EAAE,IAAID,UAAJ,EAAgBP,iBAAiB,CAACF,WAAW,CAACH,SAAb,EAAwBY,UAAxB,CAAjB;EAAsD,IAAIC,WAAJ,EAAiBR,iBAAiB,CAACF,WAAD,EAAcU,WAAd,CAAjB;EAA6CtB,MAAM,CAACC,cAAP,CAAsBW,WAAtB,EAAmC,WAAnC,EAAgD;IAAER,QAAQ,EAAE;EAAZ,CAAhD;EAAsE,OAAOQ,WAAP;AAAqB;;AAE7R,SAASW,SAAT,CAAmBC,QAAnB,EAA6BC,UAA7B,EAAyC;EAAE,IAAI,OAAOA,UAAP,KAAsB,UAAtB,IAAoCA,UAAU,KAAK,IAAvD,EAA6D;IAAE,MAAM,IAAIZ,SAAJ,CAAc,oDAAd,CAAN;EAA4E;;EAACW,QAAQ,CAACf,SAAT,GAAqBT,MAAM,CAAC0B,MAAP,CAAcD,UAAU,IAAIA,UAAU,CAAChB,SAAvC,EAAkD;IAAED,WAAW,EAAE;MAAET,KAAK,EAAEyB,QAAT;MAAmBpB,QAAQ,EAAE,IAA7B;MAAmCD,YAAY,EAAE;IAAjD;EAAf,CAAlD,CAArB;EAAkJH,MAAM,CAACC,cAAP,CAAsBuB,QAAtB,EAAgC,WAAhC,EAA6C;IAAEpB,QAAQ,EAAE;EAAZ,CAA7C;EAAmE,IAAIqB,UAAJ,EAAgBE,eAAe,CAACH,QAAD,EAAWC,UAAX,CAAf;AAAwC;;AAEpc,SAASE,eAAT,CAAyBC,CAAzB,EAA4BC,CAA5B,EAA+B;EAAEF,eAAe,GAAG3B,MAAM,CAAC8B,cAAP,IAAyB,SAASH,eAAT,CAAyBC,CAAzB,EAA4BC,CAA5B,EAA+B;IAAED,CAAC,CAACG,SAAF,GAAcF,CAAd;IAAiB,OAAOD,CAAP;EAAW,CAAxG;;EAA0G,OAAOD,eAAe,CAACC,CAAD,EAAIC,CAAJ,CAAtB;AAA+B;;AAE1K,SAASG,YAAT,CAAsBC,OAAtB,EAA+B;EAAE,IAAIC,yBAAyB,GAAGC,yBAAyB,EAAzD;;EAA6D,OAAO,SAASC,oBAAT,GAAgC;IAAE,IAAIC,KAAK,GAAGC,eAAe,CAACL,OAAD,CAA3B;IAAA,IAAsCM,MAAtC;;IAA8C,IAAIL,yBAAJ,EAA+B;MAAE,IAAIM,SAAS,GAAGF,eAAe,CAAC,IAAD,CAAf,CAAsB9B,WAAtC;;MAAmD+B,MAAM,GAAGE,OAAO,CAACC,SAAR,CAAkBL,KAAlB,EAAyBM,SAAzB,EAAoCH,SAApC,CAAT;IAA0D,CAA9I,MAAoJ;MAAED,MAAM,GAAGF,KAAK,CAACO,KAAN,CAAY,IAAZ,EAAkBD,SAAlB,CAAT;IAAwC;;IAAC,OAAOE,0BAA0B,CAAC,IAAD,EAAON,MAAP,CAAjC;EAAkD,CAAxU;AAA2U;;AAEza,SAASM,0BAAT,CAAoCC,IAApC,EAA0CC,IAA1C,EAAgD;EAAE,IAAIA,IAAI,KAAK1C,OAAO,CAAC0C,IAAD,CAAP,KAAkB,QAAlB,IAA8B,OAAOA,IAAP,KAAgB,UAAnD,CAAR,EAAwE;IAAE,OAAOA,IAAP;EAAc,CAAxF,MAA8F,IAAIA,IAAI,KAAK,KAAK,CAAlB,EAAqB;IAAE,MAAM,IAAIlC,SAAJ,CAAc,0DAAd,CAAN;EAAkF;;EAAC,OAAOmC,sBAAsB,CAACF,IAAD,CAA7B;AAAsC;;AAEhS,SAASE,sBAAT,CAAgCF,IAAhC,EAAsC;EAAE,IAAIA,IAAI,KAAK,KAAK,CAAlB,EAAqB;IAAE,MAAM,IAAIG,cAAJ,CAAmB,2DAAnB,CAAN;EAAwF;;EAAC,OAAOH,IAAP;AAAc;;AAEtK,SAASX,yBAAT,GAAqC;EAAE,IAAI,OAAOM,OAAP,KAAmB,WAAnB,IAAkC,CAACA,OAAO,CAACC,SAA/C,EAA0D,OAAO,KAAP;EAAc,IAAID,OAAO,CAACC,SAAR,CAAkBQ,IAAtB,EAA4B,OAAO,KAAP;EAAc,IAAI,OAAOC,KAAP,KAAiB,UAArB,EAAiC,OAAO,IAAP;;EAAa,IAAI;IAAEC,OAAO,CAAC3C,SAAR,CAAkB4C,OAAlB,CAA0BN,IAA1B,CAA+BN,OAAO,CAACC,SAAR,CAAkBU,OAAlB,EAA2B,EAA3B,EAA+B,YAAY,CAAE,CAA7C,CAA/B;IAAgF,OAAO,IAAP;EAAc,CAApG,CAAqG,OAAOE,CAAP,EAAU;IAAE,OAAO,KAAP;EAAe;AAAE;;AAEzU,SAAShB,eAAT,CAAyBV,CAAzB,EAA4B;EAAEU,eAAe,GAAGtC,MAAM,CAAC8B,cAAP,GAAwB9B,MAAM,CAACuD,cAA/B,GAAgD,SAASjB,eAAT,CAAyBV,CAAzB,EAA4B;IAAE,OAAOA,CAAC,CAACG,SAAF,IAAe/B,MAAM,CAACuD,cAAP,CAAsB3B,CAAtB,CAAtB;EAAiD,CAAjJ;EAAmJ,OAAOU,eAAe,CAACV,CAAD,CAAtB;AAA4B;;AAE7M,IAAI4B,QAAQ,GAAGC,OAAO,CAAC,iBAAD,CAAtB;AAAA,IACIC,MAAM,GAAGF,QAAQ,CAACE,MADtB;AAAA,IAEIC,SAAS,GAAGH,QAAQ,CAACG,SAFzB;;AAIA,IAAIC,YAAY,GAAGH,OAAO,CAAC,eAAD,CAA1B;;AAEA,IAAII,SAAS,GAAGJ,OAAO,CAAC,aAAD,CAAvB;AAAA,IACIK,KAAK,GAAGD,SAAS,CAACC,KADtB;AAAA,IAEIC,KAAK,GAAGF,SAAS,CAACE,KAFtB;;AAIA,IAAIC,QAAQ,GAAGP,OAAO,CAAC,WAAD,CAAtB;;AAEA,IAAIQ,gBAAgB,GAAGR,OAAO,CAAC,qBAAD,CAA9B;;AAEA,IAAIS,gBAAgB,GAAGT,OAAO,CAAC,qBAAD,CAA9B;;AAEA,IAAIU,qBAAqB,GAAGV,OAAO,CAAC,0BAAD,CAAnC;;AAEA,IAAIW,QAAQ,GAAGX,OAAO,CAAC,YAAD,CAAtB;;AAEA,IAAIY,SAAS,GAAGZ,OAAO,CAAC,UAAD,CAAvB;AAAA,IACIa,IAAI,GAAGD,SAAS,CAACC,IADrB;;AAGA,IAAIC,MAAM,GAAGd,OAAO,CAAC,UAAD,CAApB;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,IAAIe,YAAY,GAAG,eAAnB;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAIC,MAAM,GAAG,aAAa,UAAUC,UAAV,EAAsB;EAC9CnD,SAAS,CAACkD,MAAD,EAASC,UAAT,CAAT;;EAEA,IAAIC,MAAM,GAAG3C,YAAY,CAACyC,MAAD,CAAzB;EAEA;AACF;AACA;AACA;AACA;;;EACE,SAASA,MAAT,CAAgBG,OAAhB,EAAyB;IACvB,IAAIC,KAAJ;;IAEAnE,eAAe,CAAC,IAAD,EAAO+D,MAAP,CAAf;;IAEAI,KAAK,GAAGF,MAAM,CAAC5B,IAAP,CAAY,IAAZ,EAAkB;MACxB+B,UAAU,EAAE;IADY,CAAlB,CAAR;;IAIAD,KAAK,CAACE,SAAN,CAAgBH,OAAhB;;IAEA,OAAOC,KAAP;EACD;;EAEDzD,YAAY,CAACqD,MAAD,EAAS,CAAC;IACpB3E,GAAG,EAAE,OADe;IAEpBC,KAAK,EAAE,SAASiF,KAAT,CAAeC,sBAAf,EAAuC;MAC5C,IAAIC,MAAM,GAAG,IAAb;MACA,OAAOlF,MAAM,CAAC0B,MAAP,CAAcwD,MAAd,EAAsB;QAC3BC,KAAK,EAAE;UACLpF,KAAK,EAAE,SAASA,KAAT,CAAeqF,IAAf,EAAqB;YAC1B,IAAIC,SAAS,GAAGrF,MAAM,CAACsF,MAAP,CAAc,EAAd,EAAkBL,sBAAlB,EAA0CG,IAA1C,CAAhB,CAD0B,CACuC;YACjE;YACA;YACA;YACA;YACA;;YAEA,IAAIA,IAAI,YAAYG,KAApB,EAA2B;cACzBF,SAAS,CAACG,KAAV,GAAkBJ,IAAI,CAACI,KAAvB;cACAH,SAAS,CAACI,OAAV,GAAoBL,IAAI,CAACK,OAAzB;YACD;;YAEDP,MAAM,CAACC,KAAP,CAAaE,SAAb;UACD;QAfI;MADoB,CAAtB,CAAP;IAmBD;IACD;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;;EA/BwB,CAAD,EAiClB;IACDvF,GAAG,EAAE,WADJ;IAEDC,KAAK,EAAE,SAASgF,SAAT,GAAqB;MAC1B,IAAIW,MAAM,GAAG,IAAb;;MAEA,IAAIC,IAAI,GAAGhD,SAAS,CAACzB,MAAV,GAAmB,CAAnB,IAAwByB,SAAS,CAAC,CAAD,CAAT,KAAiBiD,SAAzC,GAAqDjD,SAAS,CAAC,CAAD,CAA9D,GAAoE,EAA/E;MAAA,IACIkD,MAAM,GAAGF,IAAI,CAACE,MADlB;MAAA,IAEIC,MAAM,GAAGH,IAAI,CAACG,MAFlB;MAAA,IAGIC,WAAW,GAAGJ,IAAI,CAACI,WAHvB;MAAA,IAIIC,MAAM,GAAGL,IAAI,CAACK,MAJlB;MAAA,IAKIC,UAAU,GAAGN,IAAI,CAACO,KALtB;MAAA,IAMIA,KAAK,GAAGD,UAAU,KAAK,KAAK,CAApB,GAAwB,MAAxB,GAAiCA,UAN7C;MAAA,IAOIE,gBAAgB,GAAGR,IAAI,CAACS,WAP5B;MAAA,IAQIA,WAAW,GAAGD,gBAAgB,KAAK,KAAK,CAA1B,GAA8B,IAA9B,GAAqCA,gBARvD;MAAA,IASIE,UAAU,GAAGV,IAAI,CAACU,UATtB;MAAA,IAUIC,MAAM,GAAGX,IAAI,CAACW,MAVlB;MAAA,IAWIC,QAAQ,GAAGZ,IAAI,CAACY,QAXpB;MAAA,IAYIC,UAAU,GAAGb,IAAI,CAACa,UAZtB;MAAA,IAaIC,SAAS,GAAGd,IAAI,CAACc,SAbrB;MAAA,IAcIC,SAAS,GAAGf,IAAI,CAACe,SAdrB;MAAA,IAeIC,WAAW,GAAGhB,IAAI,CAACgB,WAfvB;MAAA,IAgBIC,iBAAiB,GAAGjB,IAAI,CAACiB,iBAhB7B;MAAA,IAiBIC,iBAAiB,GAAGlB,IAAI,CAACkB,iBAjB7B,CAH0B,CAsB1B;;;MACA,IAAI,KAAKR,UAAL,CAAgBnF,MAApB,EAA4B;QAC1B,KAAK4F,KAAL;MACD;;MAED,KAAKjB,MAAL,GAAcA,MAAd;MACA,KAAKC,MAAL,GAAcA,MAAM,IAAI,KAAKA,MAAf,IAAyBrC,OAAO,CAAC,cAAD,CAAP,EAAvC;MACA,KAAKsC,WAAL,GAAmBA,WAAW,IAAI,IAAlC,CA7B0B,CA6Bc;;MAExC,KAAKC,MAAL,GAAcA,MAAM,IAAI,KAAKA,MAAf,IAAyBzB,MAAM,CAACwC,GAAP,CAAWf,MAAlD;MACA,KAAKE,KAAL,GAAaA,KAAb;;MAEA,IAAI,KAAKc,UAAT,EAAqB;QACnB,KAAKA,UAAL,CAAgBC,QAAhB;MACD;;MAED,IAAI,KAAKC,UAAT,EAAqB;QACnB,KAAKA,UAAL,CAAgBD,QAAhB;MACD;;MAED,KAAKD,UAAL,GAAkB,IAAI/C,gBAAJ,CAAqB,IAArB,CAAlB;MACA,KAAKiD,UAAL,GAAkB,IAAIhD,gBAAJ,CAAqB,IAArB,CAAlB;MACA,KAAKiD,SAAL,GAAiB,EAAjB;MACA,KAAKf,WAAL,GAAmBA,WAAnB,CA7C0B,CA6CM;;MAEhC,IAAIC,UAAJ,EAAgB;QACdA,UAAU,GAAGe,KAAK,CAACC,OAAN,CAAchB,UAAd,IAA4BA,UAA5B,GAAyC,CAACA,UAAD,CAAtD;QACAA,UAAU,CAACiB,OAAX,CAAmB,UAAUC,SAAV,EAAqB;UACtC,OAAO7B,MAAM,CAAC8B,GAAP,CAAWD,SAAX,CAAP;QACD,CAFD;MAGD;;MAED,IAAIjB,MAAM,IAAIC,QAAV,IAAsBC,UAAtB,IAAoCC,SAApC,IAAiDC,SAAjD,IAA8DC,WAAlE,EAA+E;QAC7E,MAAM,IAAIpB,KAAJ,CAAU,CAAC,oGAAD,EAAuG,gDAAvG,EAAyJ,sEAAzJ,EAAiOkC,IAAjO,CAAsO,IAAtO,CAAV,CAAN;MACD;;MAED,IAAIb,iBAAJ,EAAuB;QACrB,KAAKI,UAAL,CAAgBU,MAAhB,CAAuBd,iBAAvB;MACD;;MAED,IAAIC,iBAAJ,EAAuB;QACrB,KAAKK,UAAL,CAAgBQ,MAAhB,CAAuBb,iBAAvB;MACD;IACF;EAnEA,CAjCkB,EAqGlB;IACD/G,GAAG,EAAE,gBADJ;IAEDC,KAAK,EAAE,SAAS4H,cAAT,CAAwBzB,KAAxB,EAA+B;MACpC,IAAI0B,MAAM,GAAG,IAAb;;MAEA,IAAIC,eAAe,GAAGC,aAAa,CAAC,KAAK9B,MAAN,EAAcE,KAAd,CAAnC;;MAEA,IAAI2B,eAAe,KAAK,IAAxB,EAA8B;QAC5B,OAAO,KAAP;MACD;;MAED,IAAIE,oBAAoB,GAAGD,aAAa,CAAC,KAAK9B,MAAN,EAAc,KAAKE,KAAnB,CAAxC;;MAEA,IAAI6B,oBAAoB,KAAK,IAA7B,EAAmC;QACjC,OAAO,KAAP;MACD;;MAED,IAAI,CAAC,KAAK1B,UAAN,IAAoB,KAAKA,UAAL,CAAgBnF,MAAhB,KAA2B,CAAnD,EAAsD;QACpD,OAAO6G,oBAAoB,IAAIF,eAA/B;MACD;;MAED,IAAIG,KAAK,GAAG,KAAK3B,UAAL,CAAgB4B,SAAhB,CAA0B,UAAUV,SAAV,EAAqB;QACzD,IAAIW,mBAAmB,GAAGJ,aAAa,CAACF,MAAM,CAAC5B,MAAR,EAAgBuB,SAAS,CAACrB,KAA1B,CAAvC;;QAEA,IAAIgC,mBAAmB,KAAK,IAA5B,EAAkC;UAChCA,mBAAmB,GAAGH,oBAAtB;QACD;;QAED,OAAOG,mBAAmB,IAAIL,eAA9B;MACD,CARW,CAAZ;MASA,OAAOG,KAAK,KAAK,CAAC,CAAlB;IACD;IACD;;IAEA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;IAEI;;EA/DC,CArGkB,EAsKlB;IACDlI,GAAG,EAAE,KADJ;IAEDC,KAAK,EAAE,SAASoI,GAAT,CAAajC,KAAb,EAAoBkC,GAApB,EAAyB;MAC9B,IAAIC,eAAJ;;MAEA,KAAK,IAAIC,IAAI,GAAG3F,SAAS,CAACzB,MAArB,EAA6BqH,KAAK,GAAG,IAAInB,KAAJ,CAAUkB,IAAI,GAAG,CAAP,GAAWA,IAAI,GAAG,CAAlB,GAAsB,CAAhC,CAArC,EAAyEE,IAAI,GAAG,CAArF,EAAwFA,IAAI,GAAGF,IAA/F,EAAqGE,IAAI,EAAzG,EAA6G;QAC3GD,KAAK,CAACC,IAAI,GAAG,CAAR,CAAL,GAAkB7F,SAAS,CAAC6F,IAAD,CAA3B;MACD,CAL6B,CAO9B;MACA;;;MACA,IAAI7F,SAAS,CAACzB,MAAV,KAAqB,CAAzB,EAA4B;QAC1B;QACA;QACA;QACAgF,KAAK,CAACpC,KAAD,CAAL,GAAeoC,KAAK,CAACA,KAArB;;QAEA,KAAKuC,eAAL,CAAqBvC,KAArB;;QAEA,KAAKf,KAAL,CAAWe,KAAX;QACA,OAAO,IAAP;MACD,CAnB6B,CAmB5B;;;MAGF,IAAIvD,SAAS,CAACzB,MAAV,KAAqB,CAAzB,EAA4B;QAC1B,IAAIwH,IAAJ;;QAEA,IAAIN,GAAG,IAAI/H,OAAO,CAAC+H,GAAD,CAAP,KAAiB,QAA5B,EAAsC;UACpCA,GAAG,CAACtE,KAAD,CAAH,GAAasE,GAAG,CAAClC,KAAJ,GAAYA,KAAzB;;UAEA,KAAKuC,eAAL,CAAqBL,GAArB;;UAEA,KAAKjD,KAAL,CAAWiD,GAAX;UACA,OAAO,IAAP;QACD;;QAEDA,GAAG,IAAIM,IAAI,GAAG,EAAP,EAAW9I,eAAe,CAAC8I,IAAD,EAAO5E,KAAP,EAAcoC,KAAd,CAA1B,EAAgDtG,eAAe,CAAC8I,IAAD,EAAO,OAAP,EAAgBxC,KAAhB,CAA/D,EAAuFtG,eAAe,CAAC8I,IAAD,EAAO,SAAP,EAAkBN,GAAlB,CAAtG,EAA8HM,IAAlI,CAAH;;QAEA,KAAKD,eAAL,CAAqBL,GAArB;;QAEA,KAAKjD,KAAL,CAAWiD,GAAX;QACA,OAAO,IAAP;MACD;;MAED,IAAIO,IAAI,GAAGJ,KAAK,CAAC,CAAD,CAAhB;;MAEA,IAAIlI,OAAO,CAACsI,IAAD,CAAP,KAAkB,QAAlB,IAA8BA,IAAI,KAAK,IAA3C,EAAiD;QAC/C;QACA;QACA,IAAIC,MAAM,GAAGR,GAAG,IAAIA,GAAG,CAACS,KAAX,IAAoBT,GAAG,CAACS,KAAJ,CAAUrE,YAAV,CAAjC;;QAEA,IAAI,CAACoE,MAAL,EAAa;UACX,IAAIE,cAAJ;;UAEA,IAAI1D,IAAI,GAAGpF,MAAM,CAACsF,MAAP,CAAc,EAAd,EAAkB,KAAKS,WAAvB,EAAoC4C,IAApC,GAA2CG,cAAc,GAAG,EAAjB,EAAqBlJ,eAAe,CAACkJ,cAAD,EAAiBhF,KAAjB,EAAwBoC,KAAxB,CAApC,EAAoEtG,eAAe,CAACkJ,cAAD,EAAiB/E,KAAjB,EAAwBwE,KAAxB,CAAnF,EAAmH3I,eAAe,CAACkJ,cAAD,EAAiB,OAAjB,EAA0B5C,KAA1B,CAAlI,EAAoKtG,eAAe,CAACkJ,cAAD,EAAiB,SAAjB,EAA4BV,GAA5B,CAAnL,EAAqNU,cAAhQ,EAAX;UACA,IAAIH,IAAI,CAAClD,OAAT,EAAkBL,IAAI,CAACK,OAAL,GAAe,GAAGsD,MAAH,CAAU3D,IAAI,CAACK,OAAf,EAAwB,GAAxB,EAA6BsD,MAA7B,CAAoCJ,IAAI,CAAClD,OAAzC,CAAf;UAClB,IAAIkD,IAAI,CAACnD,KAAT,EAAgBJ,IAAI,CAACI,KAAL,GAAamD,IAAI,CAACnD,KAAlB;UAChB,KAAKL,KAAL,CAAWC,IAAX;UACA,OAAO,IAAP;QACD;MACF;;MAED,KAAKD,KAAL,CAAWnF,MAAM,CAACsF,MAAP,CAAc,EAAd,EAAkB,KAAKS,WAAvB,GAAqCsC,eAAe,GAAG,EAAlB,EAAsBzI,eAAe,CAACyI,eAAD,EAAkBvE,KAAlB,EAAyBoC,KAAzB,CAArC,EAAsEtG,eAAe,CAACyI,eAAD,EAAkBtE,KAAlB,EAAyBwE,KAAzB,CAArF,EAAsH3I,eAAe,CAACyI,eAAD,EAAkB,OAAlB,EAA2BnC,KAA3B,CAArI,EAAwKtG,eAAe,CAACyI,eAAD,EAAkB,SAAlB,EAA6BD,GAA7B,CAAvL,EAA0NC,eAA/P,EAAX;MACA,OAAO,IAAP;IACD;IACD;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;;EAxEK,CAtKkB,EAgPlB;IACDvI,GAAG,EAAE,YADJ;IAEDC,KAAK,EAAE,SAASiJ,UAAT,CAAoB5D,IAApB,EAA0B6D,GAA1B,EAA+BC,QAA/B,EAAyC;MAC9C,IAAI,KAAKrD,MAAT,EAAiB;QACf,OAAOqD,QAAQ,EAAf;MACD,CAH6C,CAG5C;MACF;MACA;MACA;MACA;MACA;MACA;;;MAGA,IAAI,CAAC9D,IAAI,CAACtB,KAAD,CAAT,EAAkB;QAChBsB,IAAI,CAACtB,KAAD,CAAJ,GAAcsB,IAAI,CAACc,KAAnB;MACD,CAd6C,CAc5C;MACF;MACA;;;MAGA,IAAI,CAAC,KAAKF,MAAL,CAAYZ,IAAI,CAACtB,KAAD,CAAhB,CAAD,IAA6B,KAAKkC,MAAL,CAAYZ,IAAI,CAACtB,KAAD,CAAhB,MAA6B,CAA9D,EAAiE;QAC/D;QACAqF,OAAO,CAACC,KAAR,CAAc,oCAAd,EAAoDhE,IAAI,CAACtB,KAAD,CAAxD;MACD,CAtB6C,CAsB5C;;;MAGF,IAAI,CAAC,KAAKuF,cAAL,CAAoBC,KAAzB,EAAgC;QAC9B;QACAH,OAAO,CAACC,KAAR,CAAc,uDAAd,EAAuEhE,IAAvE;MACD,CA5B6C,CA4B5C;MACF;MACA;MACA;;;MAGA,IAAI;QACF,KAAKmE,IAAL,CAAU,KAAKzD,MAAL,CAAY0D,SAAZ,CAAsBpE,IAAtB,EAA4B,KAAKU,MAAL,CAAYlB,OAAxC,CAAV;MACD,CAFD,SAEU;QACR,KAAK6E,cAAL,CAAoBC,IAApB,GAA2B,KAA3B,CADQ,CAC0B;;QAElCR,QAAQ;MACT;IACF;IACD;AACJ;AACA;AACA;AACA;;EAhDK,CAhPkB,EAkSlB;IACDpJ,GAAG,EAAE,QADJ;IAEDC,KAAK,EAAE,SAAS4J,MAAT,CAAgBT,QAAhB,EAA0B;MAC/B,IAAI7C,UAAU,GAAG,KAAKA,UAAL,CAAgBuD,KAAhB,EAAjB;MACAhG,YAAY,CAACyC,UAAD,EAAa,UAAUkB,SAAV,EAAqBsC,IAArB,EAA2B;QAClD,IAAI,CAACtC,SAAD,IAAcA,SAAS,CAACuC,QAA5B,EAAsC,OAAOC,YAAY,CAACF,IAAD,CAAnB;QACtCtC,SAAS,CAACyC,IAAV,CAAe,QAAf,EAAyBH,IAAzB;QACAtC,SAAS,CAAC0C,GAAV;MACD,CAJW,EAITf,QAJS,CAAZ;IAKD;IACD;AACJ;AACA;AACA;AACA;;EAdK,CAlSkB,EAkTlB;IACDpJ,GAAG,EAAE,KADJ;IAEDC,KAAK,EAAE,SAASyH,GAAT,CAAaD,SAAb,EAAwB;MAC7B;MACA;MACA;MACA;MACA;MACA,IAAIxG,MAAM,GAAG,CAACiD,QAAQ,CAACuD,SAAD,CAAT,IAAwBA,SAAS,CAACY,GAAV,CAAcjH,MAAd,GAAuB,CAA/C,GAAmD,IAAIiD,qBAAJ,CAA0B;QACxFoD,SAAS,EAAEA;MAD6E,CAA1B,CAAnD,GAERA,SAFL;;MAIA,IAAI,CAACxG,MAAM,CAAC0I,cAAR,IAA0B,CAAC1I,MAAM,CAAC0I,cAAP,CAAsB3E,UAArD,EAAiE;QAC/D,MAAM,IAAIS,KAAJ,CAAU,0EAAV,CAAN;MACD,CAZ4B,CAY3B;;;MAGF,KAAK2E,QAAL,CAAc,OAAd,EAAuBnJ,MAAvB;;MAEA,KAAKmJ,QAAL,CAAc,MAAd,EAAsBnJ,MAAtB;;MAEA,KAAKoJ,IAAL,CAAUpJ,MAAV;;MAEA,IAAIwG,SAAS,CAAC6C,gBAAd,EAAgC;QAC9B,KAAKpD,UAAL,CAAgBU,MAAhB;MACD;;MAED,IAAIH,SAAS,CAAC8C,gBAAd,EAAgC;QAC9B,KAAKnD,UAAL,CAAgBQ,MAAhB;MACD;;MAED,OAAO,IAAP;IACD;IACD;AACJ;AACA;AACA;AACA;;EArCK,CAlTkB,EAyVlB;IACD5H,GAAG,EAAE,QADJ;IAEDC,KAAK,EAAE,SAASuK,MAAT,CAAgB/C,SAAhB,EAA2B;MAChC,IAAI,CAACA,SAAL,EAAgB,OAAO,IAAP;MAChB,IAAIxG,MAAM,GAAGwG,SAAb;;MAEA,IAAI,CAACvD,QAAQ,CAACuD,SAAD,CAAT,IAAwBA,SAAS,CAACY,GAAV,CAAcjH,MAAd,GAAuB,CAAnD,EAAsD;QACpDH,MAAM,GAAG,KAAKsF,UAAL,CAAgBkE,MAAhB,CAAuB,UAAU1B,KAAV,EAAiB;UAC/C,OAAOA,KAAK,CAACtB,SAAN,KAAoBA,SAA3B;QACD,CAFQ,EAEN,CAFM,CAAT;MAGD;;MAED,IAAIxG,MAAJ,EAAY;QACV,KAAKyJ,MAAL,CAAYzJ,MAAZ;MACD;;MAED,OAAO,IAAP;IACD;IACD;AACJ;AACA;AACA;;EArBK,CAzVkB,EAgXlB;IACDjB,GAAG,EAAE,OADJ;IAEDC,KAAK,EAAE,SAAS+G,KAAT,GAAiB;MACtB,KAAK0D,MAAL;MACA,OAAO,IAAP;IACD;IACD;AACJ;AACA;AACA;AACA;;EAVK,CAhXkB,EA4XlB;IACD1K,GAAG,EAAE,OADJ;IAEDC,KAAK,EAAE,SAAS0K,KAAT,GAAiB;MACtB,KAAKzD,UAAL,CAAgBC,QAAhB;MACA,KAAKC,UAAL,CAAgBD,QAAhB;MACA,KAAKH,KAAL;MACA,KAAK4D,IAAL,CAAU,OAAV;MACA,OAAO,IAAP;IACD;IACD;AACJ;AACA;AACA;;EAZK,CA5XkB,EA0YlB;IACD5K,GAAG,EAAE,WADJ;IAEDC,KAAK,EAAE,SAAS4K,SAAT,GAAqB;MAC1BrG,IAAI,CAACsG,UAAL,CAAgB,WAAhB;IACD;IACD;AACJ;AACA;AACA;AACA;AACA;AACA;;EAXK,CA1YkB,EAuZlB;IACD9K,GAAG,EAAE,OADJ;IAEDC,KAAK,EAAE,SAAS8K,KAAT,CAAejG,OAAf,EAAwBsE,QAAxB,EAAkC;MACvC,IAAI,OAAOtE,OAAP,KAAmB,UAAvB,EAAmC;QACjCsE,QAAQ,GAAGtE,OAAX;QACAA,OAAO,GAAG,EAAV;MACD;;MAEDA,OAAO,GAAGA,OAAO,IAAI,EAArB;MACA,IAAIkG,OAAO,GAAG,EAAd;MACA,IAAIC,WAAW,GAAG/K,MAAM,CAACsF,MAAP,CAAc,EAAd,EAAkBV,OAAO,CAACiG,KAAR,IAAiB,EAAnC,CAAlB,CARuC,CAQmB;;MAE1D,SAASG,cAAT,CAAwBzD,SAAxB,EAAmCsC,IAAnC,EAAyC;QACvC,IAAIjF,OAAO,CAACiG,KAAR,IAAiB,OAAOtD,SAAS,CAAC0D,WAAjB,KAAiC,UAAtD,EAAkE;UAChErG,OAAO,CAACiG,KAAR,GAAgBtD,SAAS,CAAC0D,WAAV,CAAsBF,WAAtB,CAAhB;QACD;;QAEDxD,SAAS,CAACsD,KAAV,CAAgBjG,OAAhB,EAAyB,UAAUsG,GAAV,EAAeC,GAAf,EAAoB;UAC3C,IAAID,GAAJ,EAAS;YACP,OAAOrB,IAAI,CAACqB,GAAD,CAAX;UACD;;UAED,IAAI,OAAO3D,SAAS,CAAC6D,aAAjB,KAAmC,UAAvC,EAAmD;YACjDD,GAAG,GAAG5D,SAAS,CAAC6D,aAAV,CAAwBD,GAAxB,EAA6BvG,OAAO,CAACkB,MAArC,CAAN;UACD;;UAED+D,IAAI,CAAC,IAAD,EAAOsB,GAAP,CAAJ;QACD,CAVD;MAWD,CA1BsC,CA0BrC;MACF;;;MAGA,SAASE,UAAT,CAAoB9D,SAApB,EAA+BsC,IAA/B,EAAqC;QACnCmB,cAAc,CAACzD,SAAD,EAAY,UAAU2D,GAAV,EAAe3I,MAAf,EAAuB;UAC/C;UACA;UACA,IAAIsH,IAAJ,EAAU;YACRtH,MAAM,GAAG2I,GAAG,IAAI3I,MAAhB;;YAEA,IAAIA,MAAJ,EAAY;cACVuI,OAAO,CAACvD,SAAS,CAAC+D,IAAX,CAAP,GAA0B/I,MAA1B;YACD,CALO,CAKN;;;YAGFsH,IAAI;UACL;;UAEDA,IAAI,GAAG,IAAP;QACD,CAfa,CAAd;MAgBD,CA/CsC,CA+CrC;MACF;;;MAGAjG,YAAY,CAAC,KAAKyC,UAAL,CAAgBkE,MAAhB,CAAuB,UAAUhD,SAAV,EAAqB;QACvD,OAAO,CAAC,CAACA,SAAS,CAACsD,KAAnB;MACD,CAFY,CAAD,EAERQ,UAFQ,EAEI,YAAY;QAC1B,OAAOnC,QAAQ,CAAC,IAAD,EAAO4B,OAAP,CAAf;MACD,CAJW,CAAZ;IAKD;IACD;AACJ;AACA;AACA;AACA;;EA/DK,CAvZkB,EAwdlB;IACDhL,GAAG,EAAE,QADJ;IAEDC,KAAK,EAAE,SAASwL,MAAT,GAAkB;MACvB,IAAI3G,OAAO,GAAGjC,SAAS,CAACzB,MAAV,GAAmB,CAAnB,IAAwByB,SAAS,CAAC,CAAD,CAAT,KAAiBiD,SAAzC,GAAqDjD,SAAS,CAAC,CAAD,CAA9D,GAAoE,EAAlF;MACA,IAAI6I,GAAG,GAAG,IAAI9H,MAAJ,EAAV;MACA,IAAI+H,OAAO,GAAG,EAAd;MACAD,GAAG,CAACE,QAAJ,GAAeD,OAAf;;MAEAD,GAAG,CAACG,OAAJ,GAAc,YAAY;QACxB,IAAI1K,CAAC,GAAGwK,OAAO,CAACvK,MAAhB;;QAEA,OAAOD,CAAC,EAAR,EAAY;UACVwK,OAAO,CAACxK,CAAD,CAAP,CAAW0K,OAAX;QACD;MACF,CAND,CANuB,CAYpB;;;MAGH,KAAKtF,UAAL,CAAgBkE,MAAhB,CAAuB,UAAUhD,SAAV,EAAqB;QAC1C,OAAO,CAAC,CAACA,SAAS,CAACgE,MAAnB;MACD,CAFD,EAEGjE,OAFH,CAEW,UAAUC,SAAV,EAAqB;QAC9B,IAAIqE,GAAG,GAAGrE,SAAS,CAACgE,MAAV,CAAiB3G,OAAjB,CAAV;;QAEA,IAAI,CAACgH,GAAL,EAAU;UACR;QACD;;QAEDH,OAAO,CAAClC,IAAR,CAAaqC,GAAb;QACAA,GAAG,CAACC,EAAJ,CAAO,KAAP,EAAc,UAAU1D,GAAV,EAAe;UAC3BA,GAAG,CAACZ,SAAJ,GAAgBY,GAAG,CAACZ,SAAJ,IAAiB,EAAjC;UACAY,GAAG,CAACZ,SAAJ,CAAcgC,IAAd,CAAmBhC,SAAS,CAAC+D,IAA7B;UACAE,GAAG,CAACd,IAAJ,CAAS,KAAT,EAAgBvC,GAAhB;QACD,CAJD;QAKAyD,GAAG,CAACC,EAAJ,CAAO,OAAP,EAAgB,UAAUX,GAAV,EAAe;UAC7BA,GAAG,CAAC3D,SAAJ,GAAgB2D,GAAG,CAAC3D,SAAJ,IAAiB,EAAjC;UACA2D,GAAG,CAAC3D,SAAJ,CAAcgC,IAAd,CAAmBhC,SAAS,CAAC+D,IAA7B;UACAE,GAAG,CAACd,IAAJ,CAAS,OAAT,EAAkBQ,GAAlB;QACD,CAJD;MAKD,CApBD;MAqBA,OAAOM,GAAP;IACD;IACD;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;EAnDK,CAxdkB,EA6gBlB;IACD1L,GAAG,EAAE,YADJ;IAEDC,KAAK,EAAE,SAAS+L,UAAT,GAAsB;MAC3B,OAAO,IAAI1H,QAAJ,CAAa,IAAb,CAAP;IACD;IACD;AACJ;AACA;AACA;AACA;AACA;AACA;;EAXK,CA7gBkB,EA0hBlB;IACDtE,GAAG,EAAE,SADJ;IAEDC,KAAK,EAAE,SAASgM,OAAT,CAAiBC,EAAjB,EAAqB;MAC1B,IAAIC,IAAI,GAAGC,IAAI,CAACC,GAAL,EAAX;;MAEA,IAAI,KAAKhF,SAAL,CAAe6E,EAAf,CAAJ,EAAwB;QACtB,IAAII,OAAO,GAAG,KAAKjF,SAAL,CAAe6E,EAAf,CAAd;QACA,OAAO,KAAK7E,SAAL,CAAe6E,EAAf,CAAP,CAFsB,CAEK;;QAE3B,KAAK,IAAIK,KAAK,GAAG1J,SAAS,CAACzB,MAAtB,EAA8BoL,IAAI,GAAG,IAAIlF,KAAJ,CAAUiF,KAAK,GAAG,CAAR,GAAYA,KAAK,GAAG,CAApB,GAAwB,CAAlC,CAArC,EAA2EE,KAAK,GAAG,CAAxF,EAA2FA,KAAK,GAAGF,KAAnG,EAA0GE,KAAK,EAA/G,EAAmH;UACjHD,IAAI,CAACC,KAAK,GAAG,CAAT,CAAJ,GAAkB5J,SAAS,CAAC4J,KAAD,CAA3B;QACD;;QAED,IAAI,OAAOD,IAAI,CAACA,IAAI,CAACpL,MAAL,GAAc,CAAf,CAAX,KAAiC,UAArC,EAAiD;UAC/C;UACAiI,OAAO,CAAC7E,IAAR,CAAa,2DAAb;UACAgI,IAAI,CAACE,GAAL;QACD,CAZqB,CAYpB;;;QAGF,IAAIpH,IAAI,GAAG/E,OAAO,CAACiM,IAAI,CAACA,IAAI,CAACpL,MAAL,GAAc,CAAf,CAAL,CAAP,KAAmC,QAAnC,GAA8CoL,IAAI,CAACE,GAAL,EAA9C,GAA2D,EAAtE;QACApH,IAAI,CAACc,KAAL,GAAad,IAAI,CAACc,KAAL,IAAc,MAA3B;QACAd,IAAI,CAACqH,UAAL,GAAkBR,IAAI,GAAGG,OAAzB;QACAhH,IAAI,CAACK,OAAL,GAAeL,IAAI,CAACK,OAAL,IAAgBuG,EAA/B;QACA,OAAO,KAAK7G,KAAL,CAAWC,IAAX,CAAP;MACD;;MAED,KAAK+B,SAAL,CAAe6E,EAAf,IAAqBC,IAArB;MACA,OAAO,IAAP;IACD;IACD;AACJ;AACA;AACA;AACA;;EAlCK,CA1hBkB,EA8jBlB;IACDnM,GAAG,EAAE,kBADJ;IAEDC,KAAK,EAAE,SAASqK,gBAAT,GAA4B;MACjC,IAAIsC,gBAAJ,CADiC,CAGjC;;;MACAvD,OAAO,CAAC7E,IAAR,CAAa,wFAAb;;MAEA,CAACoI,gBAAgB,GAAG,KAAK1F,UAAzB,EAAqCU,MAArC,CAA4C9E,KAA5C,CAAkD8J,gBAAlD,EAAoE/J,SAApE;IACD;IACD;AACJ;AACA;AACA;AACA;;EAdK,CA9jBkB,EA8kBlB;IACD7C,GAAG,EAAE,oBADJ;IAEDC,KAAK,EAAE,SAAS4M,kBAAT,GAA8B;MACnC,IAAIC,iBAAJ,CADmC,CAGnC;;;MACAzD,OAAO,CAAC7E,IAAR,CAAa,4FAAb;;MAEA,CAACsI,iBAAiB,GAAG,KAAK5F,UAA1B,EAAsCC,QAAtC,CAA+CrE,KAA/C,CAAqDgK,iBAArD,EAAwEjK,SAAxE;IACD;IACD;AACJ;AACA;AACA;;EAbK,CA9kBkB,EA6lBlB;IACD7C,GAAG,EAAE,KADJ;IAEDC,KAAK,EAAE,SAAS8M,GAAT,GAAe;MACpB,MAAM,IAAItH,KAAJ,CAAU,CAAC,2CAAD,EAA8C,6CAA9C,EAA6F,sEAA7F,EAAqKkC,IAArK,CAA0K,IAA1K,CAAV,CAAN;IACD;IACD;AACJ;AACA;AACA;AACA;AACA;AACA;;EAXK,CA7lBkB,EA0mBlB;IACD3H,GAAG,EAAE,UADJ;IAEDC,KAAK,EAAE,SAASmK,QAAT,CAAkB4C,KAAlB,EAAyBvF,SAAzB,EAAoC;MACzC,SAASwF,cAAT,CAAwB7B,GAAxB,EAA6B;QAC3B;QACA,IAAI4B,KAAK,KAAK,OAAV,IAAqB,CAAC,KAAKzG,UAAL,CAAgB2G,QAAhB,CAAyBzF,SAAzB,CAA1B,EAA+D;UAC7D,KAAKC,GAAL,CAASD,SAAT;QACD;;QAED,KAAKmD,IAAL,CAAUoC,KAAV,EAAiB5B,GAAjB,EAAsB3D,SAAtB;MACD;;MAED,IAAI,CAACA,SAAS,CAAC,cAAcuF,KAAf,CAAd,EAAqC;QACnCvF,SAAS,CAAC,cAAcuF,KAAf,CAAT,GAAiCC,cAAc,CAACE,IAAf,CAAoB,IAApB,CAAjC;QACA1F,SAAS,CAACsE,EAAV,CAAaiB,KAAb,EAAoBvF,SAAS,CAAC,cAAcuF,KAAf,CAA7B;MACD;IACF;EAhBA,CA1mBkB,EA2nBlB;IACDhN,GAAG,EAAE,iBADJ;IAEDC,KAAK,EAAE,SAAS0I,eAAT,CAAyBL,GAAzB,EAA8B;MACnC,IAAI,KAAKrC,WAAT,EAAsB;QACpB/F,MAAM,CAACsF,MAAP,CAAc8C,GAAd,EAAmB,KAAKrC,WAAxB;MACD;IACF;EANA,CA3nBkB,CAAT,CAAZ;;EAooBA,OAAOtB,MAAP;AACD,CA7pByB,CA6pBxBd,SA7pBwB,CAA1B;;AA+pBA,SAASmE,aAAT,CAAuB9B,MAAvB,EAA+BE,KAA/B,EAAsC;EACpC,IAAInG,KAAK,GAAGiG,MAAM,CAACE,KAAD,CAAlB;;EAEA,IAAI,CAACnG,KAAD,IAAUA,KAAK,KAAK,CAAxB,EAA2B;IACzB,OAAO,IAAP;EACD;;EAED,OAAOA,KAAP;AACD;AACD;AACA;AACA;AACA;;;AAGAC,MAAM,CAACC,cAAP,CAAsBwE,MAAM,CAAChE,SAA7B,EAAwC,YAAxC,EAAsD;EACpDN,YAAY,EAAE,KADsC;EAEpDD,UAAU,EAAE,IAFwC;EAGpDgN,GAAG,EAAE,SAASA,GAAT,GAAe;IAClB,IAAI5D,KAAK,GAAG,KAAKD,cAAL,CAAoBC,KAAhC;IACA,OAAO,CAAClC,KAAK,CAACC,OAAN,CAAciC,KAAd,CAAD,GAAwB,CAACA,KAAD,EAAQiB,MAAR,CAAenH,OAAf,CAAxB,GAAkDkG,KAAzD;EACD;AANmD,CAAtD;AAQA6D,MAAM,CAACC,OAAP,GAAiB3I,MAAjB"},"metadata":{},"sourceType":"script"}